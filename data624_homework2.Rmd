---
title: "Data 624 Homework 2"
author: "Joao De Oliveira"
date: "2026-02-15"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```


```{r packages}
library(fpp3)
```


## Introduction
In this report, I will be answering questions 1, 2, 3, 4, 5, 7, 8 and 9 from the
3.7 section from the Hyndman online Forecasting book


## Question 1
Consider the GDP information in global_economy. Plot the GDP per capita for each
country over time. Which country has the highest GDP per capita? How has this 
changed over time?


## Answer 1

```{r exercise1-1-plot}
# plot gdp per capita over time
# Create GDP per capita column (use a clear column name)
gdp_data <- global_economy %>%
  mutate(gdp_per_capita = GDP / Population)

# I removed the legend otherwise I couldn't see the plot
gdp_data %>%
  autoplot(gdp_per_capita) +
  labs(title = "GDP per Capita Over Time (All Countries)",
       x = "Year", y = "GDP per Capita") +
  theme(legend.position = "none")
```

The plot is extremely crowded. So, I will compute the highest GDP per capita and
then I will plot the top 10 GDP per capita.



```{r exercise1-2}
# highest gdp per capita
gdp_data %>%
  filter(gdp_per_capita == max(gdp_per_capita, na.rm = TRUE)) %>%
  select(Country, Year, gdp_per_capita) %>%
  arrange(desc(gdp_per_capita))
```

```{r exericse1-3-top10}
# Find the top 10 countries 
top_countries <- gdp_data %>%
  as_tibble() %>%  # drop tsibble behavior for this summary step
  group_by(Country) %>%
  summarise(max_pc = max(gdp_per_capita, na.rm = TRUE), .groups = "drop") %>%
  filter(is.finite(max_pc)) %>%
  slice_max(max_pc, n = 10) %>%
  pull(Country)

print(top_countries)
```

```{r exercise1-4-plot-top10}
# Plot top 10 countries
gdp_data %>%
  filter(Country %in% top_countries) %>%
  autoplot(gdp_per_capita) +
  labs(title = "GDP per Capita Over Time (Top 10 Countries)",
       x = "Year", y = "GDP per Capita")
```

We can see that **Monaco** is the country with the highest GDP per capita. GDP 
per capita generally increases over time for most countries, reflecting long-term
economic growth. The country with the highest GDP per capita in the dataset is 
Monaco. Over time, Monaco’s GDP per capita has grown steadily and remains 
significantly higher than most other countries.

We notice that most countries with the highest GDP are small countries in terms
of population, which greatly impacts the per capita GDP (not the GDP).


## Question 2
For each of the following series, make a graph of the data. If transforming seems
appropriate, do so and describe the effect.

United States GDP from global_economy.
Slaughter of Victorian “Bulls, bullocks and steers” in aus_livestock.
Victorian Electricity Demand from vic_elec.
Gas production from aus_production.


```{r exercise2-gdp}
us_gdp <- global_economy |>
  filter(Country == "United States")

# original scale
autoplot(us_gdp, GDP) +
  labs(title = "United States GDP", x = "Year", y = "GDP[USD]")

# log transformation since exponential growth in the dataset
autoplot(us_gdp, log(GDP)) +
  labs(title = "United States GDP (log scale)", x = "Year", y = "log(GDP[USD])")
```

The first graph shows that the data has an exponential growth. Applying a log 
transformation linearizes the trend, making the growth rate appear more constant
over time and stabilizing the increasing variability.


```{r exercise2-animals-slaughter}
animals <- aus_livestock %>%
  filter(Animal == "Bulls, bullocks and steers", State == "Victoria")

# original scale
autoplot(animals, Count) +
  labs(title = "Bulls, Bullocks and Steers Slaughtered in Victoria",
       x = "Month", y = "Number of animals")

# log transform since the data has increasing variability
autoplot(animals, log(Count)) +
  labs(title = "Bulls, Bullocks and Steers Slaughtered in Victoria (log scale)",
       x = "Month", y = "log(Count)")
```

The bulls, bullocks, and steers graph varies over time and can show changing 
variability. So, I decided to do a log transformation to reduce the impact of long
peaks and makes fluctuations easier to compare comparable.


```{r exercise2-electricity}
# Original scale plot
autoplot(vic_elec, Demand) +
  labs(title = "Victorian Electricity Demand", x = "Time", y = "Demand [MWh]")

# splitting to a shorter window so patterns are visible
vic_elec %>%
  filter_index("2014-01-01" ~ "2014-02-01") %>%
  autoplot(Demand) +
  labs(title = "Victorian Electricity Demand in January of 2014",
       x = "Time", y = "Demand [MWh]")
```

The original graph is extremely dense, with a lot of data points in the same plot,
which is not surprising since data points are collected every 30min. I tried to
transform it using log but it doesn't really change much. So, I decided to focus
on a specific time interval (whole month of January) and analyze the trend in that
month. It is much easier to understand daily and weekly patterns.


```{r exercise2-gas}
# original scale plot
autoplot(aus_production, Gas) +
  labs(title = "Gas Production in Australia", x = "Time [Quarters]", y = "Gas [petajoules]")
  
# log transform since multiplicative growth
autoplot(aus_production, log(Gas)) +
  labs(title = "Gas Production in Australia (log scale)", x = "Time [Quarters]", y = "log(Gas)")
```


The dataset with the original scale has a geometric growth (multiplicative), so 
I applied the log transformation.


## Question 3
Why is a Box-Cox transformation unhelpful for the canadian_gas data?


```{r exercise3}


```